<!-- view for message board -->
<div class="col-lg-12">
  <div class="boardHeader clearfix">
	  <h1 class="pull-left">Message Board</h1>
	  <div class="pull-right alert alert-success" ng-show="success">{{successmsg}}</div>
		<div class="pull-right alert alert-danger" ng-show="error">{{errormsg}}</div>
	</div>
  <hr>

  <ul class="list-group clearfix">
    <li class="list-group-item">
      <div class="clearfix" id="add-message-box">
        <form role="form">
          <input type="text" class="form-control" autofocus ng-model="newMessage.subject" placeholder="Subject" required><br>
 				  <textarea class="form-control" ng-model="newMessage.body" placeholder="Message" required></textarea><br>
 				  <button type="submit" ng-disabled="!postButton()" class="btn btn-success pull-right" ng-click="addMessage()">Post Message</button><br>
 			  </form>
      </div>
      <div>
  			{{message.body}}
  		</div>
    </li>
  	<li data-ng-repeat="message in messages" class="list-group-item clearfix message">
  		<div>
  		  <h3 class="message-subject">{{message.subject}} 
  		  	<span ng-show="user.id==message.user_id" ng-click="deleteMessage(message.id, $index)" class="pull-right glyphicon glyphicon-remove"></span>
  		  	<br><small>Posted by {{message.author}} - {{format(message.date)}}</small>
  		  </h3>
  		</div>
     	<div ng-show="(!message.edit || user.id!=message.user_id)" ng-click="message.edit=true">
  			{{message.body}}
  		</div>
  		<div ng-show="!(!message.edit || user.id!=message.user_id)" class="edit">
 				<textarea class="form-control" ng-model="message.body" placeholder="Message" required></textarea><br>
 				<button type="submit" ng-show="!message.body==''" class="btn btn-success pull-right" ng-click="updateMessage(message.id, $index)">Update Message</button><br>
 		</div>
  		<br>
  		<div ng-click="message.showComments = true" ng-hide="message.showComments || message.comments.length == 0">
  			<h5><b>Show comments</b></h5>
  		</div>
  		<ul class="list-group comments">
  			<li ng-show="message.showComments" ng-repeat="comment in message.comments" class="list-group-item comment">
          		<h4 class="comment-body">
          			<small>Posted by {{comment.author}} - {{format(message.date)}}</small>
          			<span ng-show="user.id==comment.user_id" ng-click="deleteComment(comment.id, message.id, $index, $parent.$index)" class="pull-right glyphicon glyphicon-remove"></span>
          		</h4>
          		{{comment.body}}
        	</li>
  			<li class="list-group-item comment clearfix add-comment-box">
  				<form ng-submit="addComment($index)" role="form">
 				   <input type="text" class="form-control" ng-model="message.newComment.body" placeholder="Comment" required>
          </form>
        </li>
  		</ul>
  	</li>
  </ul>
</div>
